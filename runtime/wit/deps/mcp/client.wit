interface client {
    use types.{error, content, json-string, future-json-string};

    resource session {
        
        // List tools available on this server.
        list-tools: func() -> result<json-string, error>;

        // List resources available on this server.
        list-resources: func() -> result<json-string, error>;

        // List prompts available on this server.
        list-prompts: func() -> result<json-string, error>;

        // Execute a tool.
        call-tool: func(name: string, args: json-string) -> result<json-string, error>;

        // Read a resource.
        read-resource: func(uri: string) -> result<list<content>, error>;

        // Get a prompt.
        get-prompt: func(name: string, args: json-string) -> result<list<content>, error>;

        // --- Lifecycle ---
        receive-request: func() -> future-json-string;
        send-response: func(response: json-string);
        close: func();
    }

    // Discover available MCP servers (both runtime-provided and user-provided).
    // Returns a list of server names/identities.
    available-servers: func() -> list<string>;

    // Establish a handshake with a specific server.
    connect: func(server-name: string) -> result<session, error>;

}
