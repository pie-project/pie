package mcp:core@0.1.0;

/// Shared data types used by both Client and Server interfaces.
interface types {
    use wasi:io/poll@0.2.4.{pollable};

    /// A flexible representation of JSON data.
    /// Essential because MCP is schema-driven.
    type json-string = string;

    /// The fundamental unit of content in MCP.
    variant content {
        text(json-string),
        image(image-data),
        resource(resource-data)
    }

    record image-data {
        mime-type: string,
        data: list<u8>
    }

    record resource-data {
        uri: string,
        mime-type: option<string>,
        text: option<string>,
        blob: option<list<u8>>
    }

    record error {
        code: s32,
        message: json-string,
        data: option<json-string>
    }

    resource future-content {
        pollable: func() -> pollable;
        get: func() -> option<result<content, error>>; // Returns the content string or error
    }

    resource future-json-string {
        pollable: func() -> pollable;
        get: func() -> option<result<json-string, error>>;
    }
}
